{"version":3,"sources":["Detail.js"],"names":["Box","styled","div","Title","h2","props","color","TabContent","useEffect","tabsAni","tabs","className","Stock","shoeStock","useContext","StockContext","connect","state","reducer","alertState","reducer2","history","useHistory","id","useParams","useState","alert","setAlert","setTabs","setTabsAni","watched","setWatched","foundedItem","shoes","find","foundItem","alertTimer","setTimeout","clearTimeout","lostorage","localStorage","getItem","JSON","parse","push","Set","length","slice","setItem","stringify","src","alt","width","title","content","price","stock","onClick","setStock","dispatch","type","payload","name","quan","goBack","variant","defaultActiveKey","Item","Link","eventKey","in","classNames","timeout","map","item","to","Number","size","block","removeItem"],"mappings":"uaAUA,IAAMA,EAAMC,IAAOC,IAAV,KAGHC,EAAQF,IAAOG,GAAV,KAEC,SAAAC,GAAK,OAAIA,EAAMC,SA4H3B,SAASC,EAAYF,GAKnB,OAJAG,qBAAW,WACTH,EAAMI,SAAQ,MAGG,IAAfJ,EAAMK,KACD,qBAAKC,UAAU,SAAf,iCACiB,IAAfN,EAAMK,KACR,qBAAKC,UAAU,SAAf,iCACiB,IAAfN,EAAMK,KACR,qBAAKC,UAAU,SAAf,sCADF,EAKT,SAASC,IACP,IAAMC,EAAYC,qBAAWC,KAE7B,OACE,+CACOF,EAAU,MAYNG,uBAPf,SAAkBC,GAChB,MAAO,CACLA,MAAQA,EAAMC,QACdC,WAAaF,EAAMG,YAIRJ,EAxJf,SAAiBX,GACf,IAAMgB,EAAUC,cACRC,EAAOC,cAAPD,GAFc,EAGIE,oBAAS,GAHb,mBAGfC,EAHe,KAGRC,EAHQ,OAIEF,mBAAS,GAJX,mBAIff,EAJe,KAITkB,EAJS,OAKQH,oBAAS,GALjB,mBAKfhB,EALe,KAKNoB,EALM,OAMQJ,mBAAS,IANjB,mBAMfK,EANe,KAMNC,EANM,KAQhBC,EAAc3B,EAAM4B,MAAMC,MAAK,SAASC,GAC5C,OAAOA,EAAUZ,IAAMA,KA8BzB,OA3BAf,qBAAU,WACR,IAAM4B,EAAaC,YAAW,WAC5BV,GAAS,KACR,KACH,OAAO,WAAOW,aAAaF,MAC3B,IAEF5B,qBAAU,WACR,IAAI+B,EAAYC,aAAaC,QAAQ,YAInCF,EAHGA,EAGSG,KAAKC,MAAMJ,GAFX,IAIJK,KAAKrB,GAEQgB,GADvBA,EAAS,YAAQ,IAAIM,IAAIN,KACfO,OAAS,EAAgBP,EAAUQ,OAAO,GAAiBR,EACrEC,aAAaQ,QAAQ,UAAUN,KAAKO,UAAUV,IAC9CR,EAAWQ,KAEX,IAQA,sBAAK5B,UAAU,YAAf,UAEE,cAACX,EAAD,UACE,cAACG,EAAD,CAAOG,MAAM,OAAb,8CAIAoB,EACE,qBAAKf,UAAU,YAAf,SACE,8GAEF,KAEJ,sBAAKA,UAAU,MAAf,UACE,qBAAKA,UAAU,WAAf,SACE,qBAAKuC,IAAG,mDAA8ClB,EAAYT,GAAK,EAA/D,QAAwE4B,IAAI,iCAAQC,MAAM,WAEpG,sBAAKzC,UAAU,gBAAf,UACE,oBAAIA,UAAU,OAAd,SAAsBqB,EAAYqB,QAClC,4BAAIrB,EAAYsB,UAChB,8BAAItB,EAAYuB,MAAhB,aACA,cAAC3C,EAAD,CAAO4C,MAAOnD,EAAMmD,MAAMxB,EAAYT,MACtC,wBACAZ,UAAU,iBACV8C,QAAS,WACPpD,EAAMqD,SAAS,CAAC,EAAE,GAAG,KACrBrD,EAAMsD,SAAS,CAACC,KAAM,cAAeC,QAAU,CAACtC,GAAIS,EAAYT,GAAKuC,KAAM9B,EAAYqB,MAAOU,KAAM,KACpG1C,EAAQuB,KAAK,oBALf,4CAWJ,qBAAKjC,UAAU,MAAf,SACE,wBAAQA,UAAU,0BAA0B8C,QAAU,WAAQpC,EAAQ2C,UAAtE,+CAGF,eAAC,IAAD,CAAKC,QAAQ,OAAOC,iBAAiB,SAArC,UACE,cAAC,IAAIC,KAAL,UACE,cAAC,IAAIC,KAAL,CAAUC,SAAS,SAASZ,QAAU,WAAQ5B,GAAW,GAAQD,EAAQ,IAAzE,sBAEF,cAAC,IAAIuC,KAAL,UACE,cAAC,IAAIC,KAAL,CAAUC,SAAS,SAASZ,QAAU,WAAQ5B,GAAW,GAAQD,EAAQ,IAAzE,wBAEF,cAAC,IAAIuC,KAAL,UACE,cAAC,IAAIC,KAAL,CAAUC,SAAS,SAASZ,QAAU,WAAQ5B,GAAW,GAAQD,EAAQ,IAAzE,2BAIJ,cAAC,IAAD,CAAe0C,GAAI7D,EAAS8D,WAAW,UAAUC,QAAS,IAA1D,SACE,cAACjE,EAAD,CAAYG,KAAMA,EAAMD,QAASoB,MAGnC,sBAAKlB,UAAU,0BAAf,UACE,qBAAKA,UAAU,oBAAf,8CACA,gCAEImB,EAAQgB,OAAS,EACfhB,EAAQ2C,KAAI,SAACC,GACb,OACE,cAAC,IAAD,CAAMC,GAAE,4BAAuBD,GAAQ/D,UAAU,eAAjD,SACE,qBAAKuC,IAAG,mDAA8C0B,OAAOF,GAAQ,EAA7D,QAAsE/D,UAAU,iBADrB+D,MAMvE,qBAAK/D,UAAU,kBAAf,6EAKFmB,EAAQgB,OAAS,EACf,cAAC,IAAD,CAAQmB,QAAQ,UAAUY,KAAK,KAAKC,OAAK,EAACrB,QA9EhC,WACpB1B,EAAW,IACXS,aAAauC,WAAW,YA4EsDpE,UAAU,OAA9E,4CACA,kB","file":"static/js/4.04d32c41.chunk.js","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { Button, Nav } from 'react-bootstrap';\r\nimport styled from 'styled-components';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport './Detail.scss';\r\nimport { StockContext } from './App'\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Box = styled.div`\r\n  padding-top: 30px;\r\n`;\r\nconst Title = styled.h2`\r\n  font-size: 16px;\r\n  color: ${ props => props.color }\r\n`;\r\n\r\nfunction Detail (props) {\r\n  const history = useHistory();\r\n  const { id } = useParams();\r\n  const [alert, setAlert] = useState(true);\r\n  const [tabs, setTabs] = useState(0);\r\n  const [tabsAni, setTabsAni] = useState(true);\r\n  const [watched, setWatched] = useState([]);\r\n\r\n  const foundedItem = props.shoes.find(function(foundItem){\r\n    return foundItem.id == id\r\n  });\r\n\r\n  useEffect(() => {\r\n    const alertTimer = setTimeout(() => {\r\n      setAlert(false);\r\n    }, 2000);\r\n    return () => {clearTimeout(alertTimer)} //실행했으니 지워주쇼\r\n  },[]);  \r\n\r\n  useEffect(() => {\r\n    let lostorage = localStorage.getItem('watched');\r\n    if( !lostorage ) {\r\n      lostorage = [];\r\n    } else {\r\n      lostorage = JSON.parse(lostorage);\r\n    }\r\n    lostorage.push(id);\r\n    lostorage = [... new Set(lostorage)];\r\n    lostorage.length > 3 ? lostorage = lostorage.slice(-3) : lostorage = lostorage\r\n    localStorage.setItem('watched',JSON.stringify(lostorage));\r\n    setWatched(lostorage);\r\n    // console.log(lostorage);\r\n  },[]);\r\n  \r\n  const deleteWatched = () => {\r\n    setWatched([]);\r\n    localStorage.removeItem('watched');\r\n  }\r\n\r\n  return(\r\n    <div className=\"container\">\r\n      \r\n      <Box>\r\n        <Title color='#666'>상세페이지</Title>\r\n      </Box>\r\n\r\n      {\r\n        alert\r\n        ? <div className=\"my-alert2\">\r\n            <p>재고가 얼마 남지 않았습니다</p>\r\n          </div>\r\n        : null\r\n      }\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6\">\r\n          <img src={`https://codingapple1.github.io/shop/shoes${foundedItem.id + 1}.jpg`} alt=\"상품이미지\" width=\"100%\" />\r\n        </div>\r\n        <div className=\"col-md-6 mt-4\">\r\n          <h4 className=\"pt-5\">{foundedItem.title}</h4>\r\n          <p>{foundedItem.content}</p>\r\n          <p>{foundedItem.price} 원</p>\r\n          <Stock stock={props.stock[foundedItem.id]}/>\r\n          <button \r\n          className=\"btn btn-danger\" \r\n          onClick={() => {\r\n            props.setStock([9,11,12]);\r\n            props.dispatch({type: 'ADDITEMCART', payload : {id: foundedItem.id , name: foundedItem.title, quan: 1} });\r\n            history.push('/appleshop/cart')\r\n          }}>\r\n            주문하기\r\n          </button> \r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <button className=\"btn btn-primary ml-auto\" onClick={ () => { history.goBack(); } }>◀ 뒤로가기</button> \r\n      </div>\r\n\r\n      <Nav variant=\"tabs\" defaultActiveKey=\"link-0\">\r\n        <Nav.Item>\r\n          <Nav.Link eventKey=\"link-0\" onClick={ () => { setTabsAni(false); setTabs(0) }}>Active</Nav.Link>\r\n        </Nav.Item>\r\n        <Nav.Item>\r\n          <Nav.Link eventKey=\"link-1\" onClick={ () => { setTabsAni(false); setTabs(1) }}>Option 2</Nav.Link>\r\n        </Nav.Item>\r\n        <Nav.Item>\r\n          <Nav.Link eventKey=\"link-2\" onClick={ () => { setTabsAni(false); setTabs(2) }}>Option 3</Nav.Link>\r\n        </Nav.Item>\r\n      </Nav>\r\n        \r\n      <CSSTransition in={tabsAni} classNames=\"fade-in\" timeout={500}>\r\n        <TabContent tabs={tabs} tabsAni={setTabsAni}/>\r\n      </CSSTransition>\r\n\r\n      <div className=\"watched_box text-center\">\r\n        <div className=\"border-bottom p-1\">최근 본 상품</div>\r\n        <div>\r\n          {\r\n            watched.length > 0\r\n            ? watched.map((item) => {\r\n              return(\r\n                <Link to={`/appleshop/detail/${item}`} className=\"watched_link\" key={item}>\r\n                  <img src={`https://codingapple1.github.io/shop/shoes${Number(item) + 1}.jpg`} className=\"watched_img\" />\r\n                </Link>\r\n              )\r\n            })\r\n           \r\n            : <div className=\"watched_nothing\">\r\n                최근 본 상품이 없습니다\r\n              </div>\r\n          }\r\n          {\r\n            watched.length > 0\r\n            ? <Button variant=\"warning\" size=\"sm\" block onClick={ deleteWatched } className=\"mt-2\">상품지우기</Button>\r\n            : null\r\n          }\r\n        </div>\r\n      </div>\r\n    </div> \r\n  )\r\n}\r\n\r\nfunction TabContent (props) {\r\n  useEffect (() => {\r\n    props.tabsAni(true);\r\n  });\r\n\r\n  if (props.tabs === 0) {\r\n    return <div className=\"p-3 h3\">0번째탭</div>\r\n  } else if (props.tabs === 1) {\r\n    return <div className=\"p-3 h3\">1번째탭</div>\r\n  } else if (props.tabs === 2) {\r\n    return <div className=\"p-3 h3\">2번째탭</div>\r\n  }\r\n}\r\n\r\nfunction Stock () {\r\n  const shoeStock = useContext(StockContext);\r\n  \r\n  return (\r\n    <p>\r\n      재고: {shoeStock[0]} \r\n    </p>\r\n  )\r\n}\r\n\r\nfunction statData(state) {\r\n  return {\r\n    state : state.reducer,\r\n    alertState : state.reducer2\r\n  }\r\n}\r\n\r\nexport default connect(statData)(Detail);"],"sourceRoot":""}